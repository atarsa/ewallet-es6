(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(a,'__esModule',{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&'object'==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,'default',{enumerable:!0,value:a}),2&c&&'string'!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){a.exports=c(3)},function(){},function(){},function(a,b,c){'use strict';var d=Number.parseFloat;c.r(b);const e=function(){const a={baseCurrencyBtn:'.btn--base-currency',baseCurrencyList:'#base-currency-list',itemCurrencyInput:'#item-currency',itemAmountInput:'#item-amount',itemsList:'#items-list',ratesList:'.collection--rates',ratesBaseCurrency:'.card--rates .base-currency',ratesLastUpdated:'.card--rates .update-time',currencyListItem:'.currency-list.item',currencyList:'.currency-list',convertedAmount:'.converted-amount',walletMessage:'.wallet .message',totalSummary:'.total',totalAmount:'h4 .total-money',totalCurrency:'h4 .base-currency',addBtn:'.add-btn',updateBtn:'.update-btn',backBtn:'.back-btn',clearBtn:'.clear-btn'};return{getSelectors:function(){return a},getItemInput:function(){const b=document.querySelector(a.itemCurrencyInput).value.trim(),c=document.querySelector(a.itemAmountInput).value;return{currency:b,amount:c}},addListItem:function(b){const c=g.getBaseCurrency(),d=g.exchangeMoney(b.currency,b.amount),e=document.createElement('li');e.className='collection-item',e.setAttribute('data-id',b.id),e.innerHTML=`
        <a href="#" class="delete">
          <span class="delete-item fas fa-trash-alt"></span>
        </a>
        <a href="#" class="update">
          <span class="edit-item fas fa-edit"></span>
        </a>
        
        <span class="amount">${b.amount}</span>
        <span class="currency">${b.currency}</span>
       
        <span class="secondary-content">
          <span class="converted-amount">${d}</span>
          <span class="base-currency">${c}</span>
        </span>
      `,document.querySelector(a.itemsList).insertAdjacentElement('beforeend',e),this.checkForListItems(),this.updateTotalMoney()},updateListItem:function(a){const b=g.getBaseCurrency(),c=g.exchangeMoney(a.currency,a.amount);document.querySelector(`[data-id="${a.id}"]`).innerHTML=`
      <a href="#" class="delete">
        <span class="delete-item fas fa-trash-alt"></span>
      </a>
      <a href="#" class="update">
        <span class="edit-item fas fa-edit"></span>
      </a>
      <span class="amount">${a.amount}</span>
      <span class="currency">${a.currency}</span>
      
      <span class="secondary-content">
        <span class="converted-amount">${c}</span>
        <span class="base-currency">${b}</span>
      </span>`,this.updateTotalMoney()},populateItemsList:function(){const b=g.getDataItems();document.querySelector(a.itemsList).innerHTML='',b.forEach((a)=>this.addListItem(a))},updateTotalMoney:function(){const b=g.getBaseCurrency();let c=0;document.querySelectorAll(a.convertedAmount).forEach((a)=>{c+=d(a.innerText)}),document.querySelector(a.totalAmount).innerHTML=c.toFixed(2),document.querySelector(a.totalCurrency).innerHTML=b},populateTodaysRates:function(){const b=g.getDataExchangeRates(),c=g.getAvaliableCurrencies(),d=g.getTodaysRatesList();let e=document.querySelector(a.ratesList);e.innerHTML='',d.forEach((a)=>{e.innerHTML+=`
          <li class="collection-item">
            <span class="flag-icon flag-icon-${c[a][1]}"></span>
            <span class="left-align"> ${a} </span>
            <span class="right">${b[a].toFixed(3)}</span>
          </li>
          `})},updateBaseCurrencyBtn:function(b){const c=g.getAvaliableCurrencies();let d=document.querySelector(a.baseCurrencyBtn);d.innerHTML=`
      <span class="flag-icon flag-icon-${c[b][1]}"></span>
      ${b} <span class="fas fa-chevron-down"></span>
      `},showCurrencyList:function(){const b=g.getAvaliableCurrencies();let c,d;c=document.querySelector(a.currencyListItem),d=document.querySelector(a.itemCurrencyInput).value,c.innerHTML='';let e='';for(const[a,c]of Object.entries(b))(c[0].toLowerCase().includes(d.toLowerCase())||a.toLowerCase().includes(d.toLowerCase()))&&(e+=`<li class="collection-item">
            <span class="flag-icon flag-icon-${c[1]}"></span>
            ${a} 
            <span class="small">${c[0]}</span></li>`);c.innerHTML=e},deleteItemFromList:function(a){document.querySelector(`[data-id="${a}"]`).remove(),this.updateTotalMoney()},addItemToForm:function(){const b=g.getCurrentItem();let c=this.getCurrencyFullName(b.currency);document.querySelector(a.itemCurrencyInput).value=`${b.currency} ${c}`,document.querySelector(a.itemCurrencyInput).disabled=!0,document.querySelector(a.itemAmountInput).value=b.amount,e.setEditState()},clearUserInput:function(){document.querySelector(a.itemCurrencyInput).value='',document.querySelector(a.itemAmountInput).value=''},clearItemsList:function(){document.querySelector(a.itemsList).innerHTML='',this.checkForListItems()},setDefaultState:function(){document.querySelector(a.itemCurrencyInput).disabled=!1,e.clearUserInput(),document.querySelector(a.addBtn).style.display='inline',document.querySelector(a.updateBtn).style.display='none',document.querySelector(a.backBtn).style.display='none'},setEditState:function(){document.querySelector(a.addBtn).style.display='none',document.querySelector(a.updateBtn).style.display='inline',document.querySelector(a.backBtn).style.display='inline'},updateUI:function(){this.populateItemsList(),this.checkForListItems(),this.updateTotalMoney(),this.populateTodaysRates(),this.updateBaseCurrencyInTodaysRates(),this.updateExchangeTime()},updateBaseCurrencyInTodaysRates:function(){const b=g.getBaseCurrency();document.querySelector(a.ratesBaseCurrency).innerHTML=`
      1 ${b} =`},updateExchangeTime:function(){const b=g.getExchangeRateLastUpdate();document.querySelector(a.ratesLastUpdated).innerHTML=b},checkForListItems:function(){const b=document.querySelector(a.itemsList),c=document.querySelector(a.totalSummary),d=document.querySelector(a.walletMessage);0===b.childNodes.length?(c.style.display='none',d.style.display='block'):(c.style.display='block',d.style.display='none')},getCurrencyFullName:function(a){let b='';const c=g.getAvaliableCurrencies();for(let[d,e]of Object.entries(c))if(d===a){b=e[0];break}return b},showAlert:function(a){const b=document.querySelector('.card .alert');b.innerText=a,b.style.display='block',setTimeout(()=>{this.hideAlert()},2e3)},hideAlert:function(){document.querySelector('.alert').style.display='none'}}}(),f=function(){return{addItemToStorage:function(a){let b;null===localStorage.getItem('items')?(b=[],b.push(a),localStorage.setItem('items',JSON.stringify(b))):(b=JSON.parse(localStorage.getItem('items')),b.push(a),localStorage.setItem('items',JSON.stringify(b)))},getItemsFromStorage:function(){let a;return a=null===localStorage.getItem('items')?[]:JSON.parse(localStorage.getItem('items')),a},updateItemInStorage:function(a){let b=JSON.parse(localStorage.getItem('items'));b.forEach((c,d)=>{a.id===c.id&&b.splice(d,1,a)}),localStorage.setItem('items',JSON.stringify(b))},removeItemFromStorage:function(a){a=parseInt(a);let b=JSON.parse(localStorage.getItem('items'));b.forEach((c,d)=>{a===c.id&&b.splice(d,1)}),localStorage.setItem('items',JSON.stringify(b))},clearAllStorage:function(){localStorage.removeItem('items'),localStorage.removeItem('baseCurrency')},addBaseCurrencyToStorage:function(a){localStorage.setItem('baseCurrency',a)},getBaseCurrencyFromStorage:function(){let a;return null===localStorage.getItem('baseCurrency')?(localStorage.setItem('baseCurrency','GBP'),a='GBP'):a=localStorage.getItem('baseCurrency'),a}}}(),g=function(){const a=function(a,b,c){this.id=a,this.currency=b,this.amount=c},b={items:f.getItemsFromStorage(),currentItem:null,baseCurrency:f.getBaseCurrencyFromStorage(),exchangeRates:{},exchangeRateLastUpdate:null,todaysRatesList:[]},c={EUR:['Euro','eu'],USD:['US dollar','us'],JPY:['Japanese yen','jp'],BGN:['Bulgarian lev','bg'],CZK:['Czech koruna','cz'],DKK:['Danish krone','dk'],GBP:['Pound sterling','gb'],HUF:['Hungarian forint','hu'],PLN:['Polish zloty','pl'],RON:['Romanian leu','ro'],SEK:['Swedish krona','se'],CHF:['Swiss franc','ch'],ISK:['Icelandic krona','is'],NOK:['Norwegian krone','no'],HRK:['Croatian kuna','hr'],RUB:['Russian rouble','ru'],TRY:['Turkish lira','tr'],AUD:['Australian dollar','au'],BRL:['Brazilian real','br'],CAD:['Canadian dollar','ca'],CNY:['Chinese yuan renminbi','cn'],HKD:['Hong Kong dollar','hk'],IDR:['Indonesian rupiah','id'],ILS:['Israeli shekel','il'],INR:['Indian rupee','in'],KRW:['South Korean won','kr'],MXN:['Mexican peso','mx'],MYR:['Malaysian ringgit','my'],NZD:['New Zealand dollar','nz'],PHP:['Philippine peso','ph'],SGD:['Singapore dollar','sg'],THB:['Thai baht','th'],ZAR:['South African rand','za']};return{addItem:function(c,e){let g;g=0<b.items.length?b.items[b.items.length-1].id+1:0,e=d(e);let h=new a(g,c,e);return b.items.push(h),f.addItemToStorage(h),h},deleteItem:function(a){const c=b.items.map((a)=>a.id),d=c.indexOf(a);b.items.splice(d,1)},updateItem:function(a,c){let d=null;return c=parseInt(c),b.items.forEach((e)=>{e.id===b.currentItem.id&&(e.currency=a,e.amount=c,d=e)}),d},setBaseCurrency:function(a){b.baseCurrency=a,f.addBaseCurrencyToStorage(a),this.fetchCurrencyRates(a).then(()=>{this.setTodaysRatesList(),e.updateUI()}).catch((a)=>console.log(a))},getBaseCurrency:function(){return b.baseCurrency},getTodaysRatesList:function(){return b.todaysRatesList},setTodaysRatesList:function(){switch(b.baseCurrency){case'GBP':b.todaysRatesList=['USD','EUR','CAD','AUD','PLN'];break;case'USD':b.todaysRatesList=['GBP','EUR','CAD','AUD','PLN'];break;case'EUR':b.todaysRatesList=['GBP','USD','CAD','AUD','PLN'];break;case'CAD':b.todaysRatesList=['GBP','EUR','USD','AUD','PLN'];break;case'AUD':b.todaysRatesList=['GBP','EUR','CAD','USD','PLN'];break;default:b.todaysRatesList=['USD','GBP','EUR','CAD','AUD'];}},getAvaliableCurrencies:function(){return c},fetchCurrencyRates:async function(a){let b=`https://api.exchangeratesapi.io/latest?base=${a}`,c={};const d=await fetch(b),e=await d.json();for(const[b,d]of Object.entries(e.rates))c[b]=d;await this.setDataExchangeRates(c),this.setExchangeRateLastUpdate(new Date().toLocaleString())},setDataExchangeRates:function(a){b.exchangeRates=a},getDataExchangeRates:function(){return b.exchangeRates},setExchangeRateLastUpdate:function(a){b.exchangeRateLastUpdate=a},getExchangeRateLastUpdate:function(){return b.exchangeRateLastUpdate},exchangeMoney:function(a,b){let c=0;const d=this.getDataExchangeRates();for(const[e,f]of Object.entries(d))e===a&&(c=(b/f).toFixed(2));return c},getItemById:function(a){let c=null;return b.items.forEach((b)=>{b.id===a&&(c=b)}),c},getDataItems:function(){return b.items},clearDataItems:function(){b.items=[]},setCurrentItem:function(a){b.currentItem=a},getCurrentItem:function(){return b.currentItem},isCurrencyValid:function(a){let b=!1;a=a.split(' ');for(let[d,e]of Object.entries(c))if(d==a[0]||e[0]==a[1]){b=!0;break}return b},dataLog:function(){console.log(b)}}}();c(1),c(2);const h=function(a,b,c){function d(c){let d;d=c.target.matches('.flag-icon')?c.target.parentElement.dataset.currency:c.target.dataset.currency,a.setBaseCurrency(d),b.updateBaseCurrencyBtn(d)}function e(c){const d=b.getItemInput();if(!(''!=d.currency&&''!=d.amount))b.showAlert('Please fill the form.');else if(0>d.amount)b.showAlert('Amount must be positive.');else{if(a.isCurrencyValid(d.currency)){d.currency=d.currency.split(' ')[0];const c=a.getDataItems();if(0===c.length){let c=a.addItem(d.currency,d.amount);b.addListItem(c)}else{let e=c.find(function(a){return a.currency===d.currency});if(e)e.amount+=k(d.amount),b.updateListItem(e);else{let c=a.addItem(d.currency,d.amount);b.addListItem(c)}}}else b.showAlert(`"${d.currency}" is not a valid currency.`);b.clearUserInput()}a.dataLog(),c.preventDefault()}function f(d){if(d.target.matches('.delete-item')){const e=d.target.parentElement.parentElement.getAttribute('data-id');confirm('Are you sure?')&&(a.deleteItem(e),c.removeItemFromStorage(e),b.deleteItemFromList(e),b.toggleItemsListBorder())}}function g(c){if(c.target.matches('.edit-item')){const d=c.target.parentElement.parentElement.getAttribute('data-id'),e=a.getItemById(k(d));a.setCurrentItem(e),b.addItemToForm()}}function h(){const d=b.getItemInput();d.currency.includes(' ')&&(d.currency=d.currency.split(' ')[0]);const e=a.updateItem(d.currency,d.amount);c.updateItemInStorage(e),b.updateListItem(e),b.clearUserInput(),b.setDefaultState()}function i(){confirm('Are you sure?')&&(a.clearDataItems(),c.clearAllStorage(),b.clearUserInput(),b.clearItemsList(),b.updateTotalMoney())}function j(a){let b;a.target.matches('.small')||a.target.matches('.flag-icon')?(b=a.target.parentElement.parentElement,document.querySelector(l.itemCurrencyInput).value=a.target.parentElement.innerText):(b=a.target.parentElement,document.querySelector(l.itemCurrencyInput).value=a.target.innerText),b.innerHTML=''}var k=Number.parseInt;const l=b.getSelectors(),m=function(){document.querySelector(l.itemCurrencyInput).addEventListener('keyup',b.showCurrencyList),document.querySelector(l.currencyList).addEventListener('click',j),document.querySelector(l.baseCurrencyList).addEventListener('click',d),document.querySelector(l.addBtn).addEventListener('click',e),document.querySelector(l.updateBtn).addEventListener('click',h),document.querySelector(l.itemsList).addEventListener('click',f),document.querySelector(l.itemsList).addEventListener('click',g),document.querySelector(l.backBtn).addEventListener('click',b.setDefaultState),document.querySelector(l.clearBtn).addEventListener('click',i)};return{init:function(){b.setDefaultState();const c=a.getBaseCurrency();b.updateBaseCurrencyBtn(c),a.setTodaysRatesList(),a.fetchCurrencyRates(c).then(()=>{b.updateUI()}),m()}}}(g,e,f);h.init()}]);